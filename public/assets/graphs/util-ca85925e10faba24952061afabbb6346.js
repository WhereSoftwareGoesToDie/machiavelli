function formatData(t){return Rickshaw.Fixtures.Number.formatKMBT_round(parseFloat(t),0,0,4)}function getTimeFixture(){return"utc"==gon.clock?new Rickshaw.Fixtures.Time.Precise:new Rickshaw.Fixtures.Time.Precise.Local}function getD3Time(t){return f_string="%Y-%m-%d %H:%M:%S %Z",date=new Date(1e3*t),(d="utc"==gon.clock?d3.time.format.utc(f_string):d3.time.format(f_string))(date)}function zoomtoselected(){$(window).on("hashchange",function(){hash=window.location.hash.slice(1).split(","),start=parseInt(hash[0]),stop=parseInt(hash[1]),0===start&&(start=gon.start),0===stop&&(stop=gon.stop),600>stop-start&&(stop=start+600),url=gon.base,url+="&start="+start,url+="&stop="+stop,html="<a href='"+url+"' data-toggle='tooltip_z' ",html+="data-original-title='Magnify search to selected'><i class='icon-zoom-in no_link'>",html+="</i></a>",$("#zoomtoselected").html(html),$("[data-toggle='tooltip_z']").tooltip({placement:"bottom",container:"body",delay:{show:500}})})}function rickshawFitToWindow(t){r=window.innerWidth<768?180:460,new_width=window.innerWidth-r,t.configure({width:new_width}),t.render(),$("#y_axis_right")&&$("#y_axis_right").attr("style","left: "+(new_width+60)+"px"),$("#legend-dual")&&$("#legend-dual").attr("style","width: "+new_width+"px"),fitSlider()}function initProgress(){nanobar=new Nanobar({bg:"#356895",id:"#progress"})}function updateProgress(){a=complete/gon.metrics.length*100,nanobar.go(a)}function doneProgress(){nanobar.go(100)}function fitSlider(){"undefined"!=typeof slider&&(slider.configure({width:new_width,height:30}),slider.render())}function dynamicWidth(t){rickshawFitToWindow(t),$(window).on("resize",function(){rickshawFitToWindow(t)})}function renderWaiting(t){document.getElementById(t).innerHTML="<i class='icon-spinner icon-spin'>"}function unrenderWaiting(t){t?$("#"+t).find(".icon-spinner").hide():$(".icon-spinner").hide()}function showURL(t,e){show="<span class='data_source'><a href='"+e+"' target=_blank><i title='Open external data source' class='icon-external-link'></i></a></span>",document.getElementById(t).innerHTML=show}function removeURL(t,e){rm="<span class='remove_metric'><a href='"+e+"'><i title='Remove graph' class='icon-remove'></i></a></span>",document.getElementById(t).innerHTML=rm}function stripHTML(t){return t.replace(/<(?:.|\n)*?>/gm,"").replace(/(\r\n|\n|\r)/gm,"")}function renderError(t,e,n,i){e=stripHTML(e),error_alert="<div class='alert alert-danger'>"+e,i&&(error_alert+=". <a class='alert-link' href='"+i+"'>Remove graph</a>."),n&&(error_alert+="<a class='detail_toggle alert-link' href='javascript:void(0);'>(details)</a><div class='detail' style='display:none'>"+n+"</div>"),error_alert+="</div>",document.getElementById(t).innerHTML=error_alert,$("#"+t+" .detail_toggle").click(function(){$(this).parent().find(".detail").toggle(100)})}function metricURL(t,e,n,i){return t+"&start="+e+"&stop="+n+"&step="+i}function stopButtonClick(){stopUpdates(),enablePlay()}function stopAll(){stopUpdates(),stopButtonClick()}function enableStop(){$("#autoplay_stop_link").removeClass("disabled"),$("#autoplay_play_link").addClass("disabled")}function enablePlay(){$("#autoplay_stop_link").addClass("disabled"),$("#autoplay_play_link").removeClass("disabled")}function metric_sort(){$("#graphed_metrics").sortable({stop:function(){var t=[],e=[];$(".sortable").each(function(e,n){t.push("metric="+$(n).find("span.metric")[0].dataset.metric)}),$.each(location.search.split("&"),function(t,n){-1==n.indexOf("metric")&&e.push(n)}),new_url=location.origin+location.pathname+"?"+e.join("&").replace("?","")+"&"+t.join("&"),window.location.href=new_url}})}function clean(t,e){for(var n=0;n<t.length;n++)t[n]==e&&(t.splice(n,1),n--);return t}var errorMessage={noData:"No data returned from endpoint",endpointError:"Error retrieving data from endpoint"};